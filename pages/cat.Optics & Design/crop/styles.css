/* --- Base layout --------------------------------------------------------- */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Inter, system-ui, sans-serif;
  background: #0a0a0a;
  color: #fff;
  overflow: hidden;
}

.app-container { height: 100%; display: flex; flex-direction: column; }
.header { text-align: center; padding: 12px 20px; background: #151515; border-bottom: 1px solid #2a2a2a; }
.title {
  font-size: 20px; font-weight: 800; letter-spacing: -0.3px;
  background: linear-gradient(135deg, #ffffff, #00ff88);
  -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
}

.main-content { flex: 1; display: flex; gap: 20px; padding: 40px 20px 20px; overflow: hidden; }
.left-panel { flex: 1; min-width: 0; display: flex; align-items: center; justify-content: center; }
.right-panel { width: 340px; display: flex; flex-direction: column; gap: 16px; height: 100%; }

/* --- Drop zone ----------------------------------------------------------- */
.drop-zone {
  position: relative;
  width: min(100%, 50vw); height: 220px;
  border: 2px dashed #3a3a3a; border-radius: 12px;
  background: rgba(0, 255, 136, 0.06);
  display: flex; align-items: center; justify-content: center; flex-direction: column;
  cursor: pointer; transition: all .18s ease; padding: 16px; text-align: center; outline: none;
}
.drop-zone:hover, .drop-zone.drag-over { border-color: #00ff88; background: rgba(0,255,136,.1); }
.drop-icon { width: 40px; height: 40px; margin-bottom: 8px; fill: #00ff88; opacity: .85; }
.drop-text { font-size: 14px; font-weight: 700; }
.drop-subtext { font-size: 11px; color: #8a8a8a; max-width: 420px; }
.drop-zone:focus-visible { box-shadow: 0 0 0 3px rgba(0,255,136,.25); }

/* --- Preview / crop area ------------------------------------------------- */
.preview-container {
  width: min(100%, 50vw); height: 100%; max-height: 520px;
  position: relative; border-radius: 12px; overflow: hidden;
}
.crop-area {
  position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);
  border: 2px dashed #00ff88; border-radius: 8px; overflow: hidden;
}
.crop-area img {
  position: absolute; left: 50%; top: 50%;
  transform-origin: center center;
  user-select: none; -webkit-user-drag: none; pointer-events: none;
}

/* --- Controls ------------------------------------------------------------ */
.controls {
  flex: 1; display: flex; flex-direction: column; gap: 22px; overflow: auto;
  background: linear-gradient(145deg, rgba(26, 26, 26, 0.9), rgba(17, 17, 17, 0.9));
  border: 1px solid rgba(255,255,255,.08); border-radius: 16px; padding: 18px;
  backdrop-filter: blur(18px);
}
.control-section { display: flex; flex-direction: column; gap: 14px; }
.section-header { display: flex; align-items: center; gap: 10px; padding-bottom: 8px; border-bottom: 1px solid rgba(255,255,255,.08); }
.section-title { font-size: 13px; font-weight: 800; }
.control-label { font-size: 11px; font-weight: 700; color: #00ff88; letter-spacing: .4px; text-transform: uppercase; }
.control-group { display: flex; flex-direction: column; gap: 8px; }

.dimension-inputs { display: flex; align-items: center; gap: 10px; }
.input-wrapper { position: relative; flex: 1; }
.dimension-input {
  width: 100%; background: rgba(0,0,0,.45); border: 1px solid rgba(255,255,255,.18);
  border-radius: 8px; padding: 12px 14px; color: #fff; font-size: 13px; font-weight: 600; transition: all .18s;
}
.dimension-input:focus { outline: none; border-color: #00ff88; background: rgba(0,255,136,.06); }
.input-label { position: absolute; right: 12px; top: 50%; transform: translateY(-50%); font-size: 10px; color: #7a7a7a; font-weight: 700; }
.dimension-separator { color: #777; font-weight: 800; font-size: 16px; }

.ratio-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; }
.ratio-btn {
  padding: 8px 4px; background: rgba(255,255,255,.05); border: 1px solid rgba(255,255,255,.08);
  border-radius: 6px; color: #cfcfcf; font-size: 10px; font-weight: 800; cursor: pointer; transition: all .15s;
  text-align: center;
}
.ratio-btn:hover { background: rgba(0,255,136,.12); border-color: rgba(0,255,136,.35); color: #00ff88; }
.ratio-btn.active { background: linear-gradient(135deg, #00ff88, #00cc70); border-color: #00ff88; color: #000; }
.custom-ratio-btn { background: rgba(0,255,136,.12); border-color: rgba(0,255,136,.5); color: #00ff88; }

/* --- Sliders (cross-browser, iframe-friendly) --------------------------- */
.slider-container { display: flex; align-items: center; gap: 10px; }
.slider {
  -webkit-appearance: none; appearance: none;
  width: 100%; height: 6px; border-radius: 3px; background: #303030; outline: none;
  cursor: pointer; /* Important for iframe edge-cases */
}
/* WebKit */
.slider::-webkit-slider-runnable-track { height: 6px; border-radius: 3px; background: linear-gradient(90deg, rgba(0,255,136,.45), rgba(0,255,136,.15)); }
.slider::-webkit-slider-thumb {
  -webkit-appearance: none; appearance: none;
  width: 16px; height: 16px; border-radius: 50%; background: #00ff88; border: 2px solid #0a0a0a;
  margin-top: -5px; cursor: grab;
}
.slider:active::-webkit-slider-thumb { cursor: grabbing; }
/* Firefox */
.slider::-moz-range-track { height: 6px; border-radius: 3px; background: linear-gradient(90deg, rgba(0,255,136,.45), rgba(0,255,136,.15)); }
.slider::-moz-range-thumb {
  width: 16px; height: 16px; border-radius: 50%; background: #00ff88; border: 2px solid #0a0a0a; cursor: grab;
}
/* Legacy Edge / IE */
.slider::-ms-track { height: 6px; color: transparent; background: transparent; border-color: transparent; }
.slider::-ms-thumb { width: 16px; height: 16px; border-radius: 50%; background: #00ff88; border: 2px solid #0a0a0a; }

.value-display {
  background: #1b1b1b; padding: 4px 8px; border-radius: 4px;
  border: 1px solid #333; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  font-size: 10px; color: #00ff88; min-width: 54px; text-align: center;
}
.value-display.zoom-orange { color: #ff9a3c; }
.value-display.zoom-red { color: #ff5252; }

/* --- Export -------------------------------------------------------------- */
.filename-input-wrapper { position: relative; display: flex; align-items: center; }
.filename-input {
  flex: 1; background: rgba(0,0,0,.45); border: 1px solid rgba(255,255,255,.18);
  border-radius: 8px; padding: 12px 48px 12px 14px; color: #fff; font-size: 13px; transition: all .18s;
}
.filename-input:focus { outline: none; border-color: #00ff88; background: rgba(0,255,136,.06); }
.filename-extension { position: absolute; right: 12px; top: 50%; transform: translateY(-50%); font-size: 12px; color: #777; font-weight: 800; }

.export-section {
  background: linear-gradient(145deg, rgba(0,255,136,.1), rgba(0,200,112,.05));
  border: 1px solid rgba(0,255,136,.2); border-radius: 16px; padding: 18px; backdrop-filter: blur(18px);
}
.export-actions { display: flex; flex-direction: column; gap: 8px; }
.export-btn {
  display: flex; align-items: center; justify-content: center; gap: 8px;
  padding: 14px 18px; border: none; border-radius: 12px; font-size: 13px; font-weight: 900;
  cursor: pointer; transition: transform .15s, box-shadow .15s;
}
.export-btn.primary { background: linear-gradient(135deg, #00ff88, #00cc70); color: #000; }
.export-btn:hover { transform: translateY(-1px); box-shadow: 0 10px 24px rgba(0,255,136,.25); }
.btn-badge { background: rgba(0,0,0,.22); padding: 4px 8px; border-radius: 12px; font-size: 10px; font-weight: 800; }

.help-text { font-size: 10px; color: #9a9a9a; }

/* Focus */
button:focus-visible, input:focus-visible { outline: 2px solid rgba(0,255,136,.55); outline-offset: 2px; border-radius: 8px; }
