<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Combined GIF Command Generator</title>
  <style>
    body {
      font-family: "Segoe UI", Roboto, Arial, sans-serif;
      background: linear-gradient(135deg, #e0eafc, #cfdef3);
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding-top: 40px;
    }

    .container {
      background: #fff;
      padding: 30px 40px;
      border-radius: 12px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      max-width: 700px;
      width: 90%;
      animation: fadeIn 0.6s ease-in-out;
    }

    h1 {
      text-align: center;
      margin-bottom: 10px;
      font-size: 1.8rem;
      color: #2c3e50;
    }

    p {
      text-align: center;
      color: #555;
      margin-bottom: 25px;
    }

    label {
      display: block;
      margin: 15px 0 5px;
      font-weight: 600;
      color: #333;
    }

    input[type="text"], input[type="number"], textarea {
      width: 100%;
      padding: 12px 14px;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 8px;
      transition: border 0.3s ease, box-shadow 0.3s ease;
    }

    input:focus, textarea:focus {
      border-color: #3498db;
      box-shadow: 0 0 6px rgba(52, 152, 219, 0.4);
      outline: none;
    }

    button {
      display: inline-block;
      width: 100%;
      padding: 14px;
      margin-top: 20px;
      font-size: 1rem;
      font-weight: 600;
      border: none;
      border-radius: 8px;
      background: linear-gradient(135deg, #3498db, #2ecc71);
      color: white;
      cursor: pointer;
      transition: transform 0.15s ease, box-shadow 0.2s ease;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }

    textarea {
      margin-top: 20px;
      height: 160px;
      resize: none;
      font-family: monospace;
      font-size: 0.95rem;
      background: #f8f9fa;
    }

    .footer {
      text-align: center;
      margin-top: 20px;
      font-size: 0.85rem;
      color: #888;
    }

    @keyframes fadeIn {
      from {opacity: 0; transform: translateY(10px);}
      to {opacity: 1; transform: translateY(0);}
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üéûÔ∏è Combined GIF Command Generator</h1>
    <p>Generate your <code>ffmpeg</code> GIF conversion commands easily.  
       Default crop: <code>crop=1440:1072:240:4</code> (for 1920√ó1080 video).</p>

    <form id="commandForm">
      <label for="videoPath">üé• Video File Path</label>
      <input type="text" id="videoPath" placeholder="e.g., C:\Users\Spencer\Documents\video.mp4" required>
      
      <label for="outputWidth">üìê Desired Output Width (px)</label>
      <input type="number" id="outputWidth" placeholder="e.g., 800" required>
      
      <label for="frameRate">‚è±Ô∏è Frame Rate (fps)</label>
      <input type="number" id="frameRate" placeholder="e.g., 24" required>
      
      <button type="button" onclick="generateCommand()">‚ö° Generate Command</button>
    </form>

    <label for="commandOutput">üìù Generated Command</label>
    <textarea id="commandOutput" readonly placeholder="Your combined command will appear here..."></textarea>
    
    <div class="footer">Made with ‚ù§Ô∏è for smooth GIF creation</div>
  </div>

  <script>
    function generateCommand() {
      const videoPath = document.getElementById("videoPath").value.trim();
      const outputWidth = parseInt(document.getElementById("outputWidth").value);
      const frameRate = document.getElementById("frameRate").value.trim();
      
      if (!videoPath || isNaN(outputWidth) || !frameRate) {
        alert("‚ö†Ô∏è Please fill in all fields correctly.");
        return;
      }
      
      // Extract folder and base name from the video path
      const separators = /[\\/]/;
      const parts = videoPath.split(separators);
      const fileName = parts.pop();
      const folder = parts.join("\\");
      const baseName = fileName.split('.')[0];
      
      // Default crop
      const cropFilter = "crop=1440:1072:240:4";
      
      // Preserve aspect ratio of cropped video (1440x1072)
      const outputHeight = Math.round(outputWidth * 1072 / 1440);
      
      // Build paths
      const croppedPath = `${folder}\\${baseName}_cropped.mp4`;
      const palettePath = `${folder}\\${baseName}_palette.png`;
      const gifPath = `${folder}\\${baseName}.gif`;
      
      // Final combined command
      const command = `ffmpeg -i "${videoPath}" -vf "${cropFilter}" -y "${croppedPath}" && ` +
                      `ffmpeg -i "${croppedPath}" -vf "fps=${frameRate},scale=${outputWidth}:${outputHeight}:flags=lanczos,palettegen" -y "${palettePath}" && ` +
                      `ffmpeg -i "${croppedPath}" -i "${palettePath}" -filter_complex "fps=${frameRate},scale=${outputWidth}:${outputHeight}:flags=lanczos [x]; [x][1:v] paletteuse=dither=bayer" -y "${gifPath}"`;
      
      document.getElementById("commandOutput").value = command;
    }
  </script>
</body>
</html>
