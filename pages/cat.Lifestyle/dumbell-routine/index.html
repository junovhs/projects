<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Dumbbell Full-Body — 1 or 2 DB</title>
  <meta name="color-scheme" content="light dark"/>
  <style>
    /* ================================
       THEME TOKENS (deterministic)
       ================================ */
    :root{
      --c-bg: #f6f7fb;
      --c-surface: #ffffff;
      --c-text: #0f172a;
      --c-muted: #6b7280;
      --c-line: #e5e7eb;
      --c-accent-1: #6366f1;
      --c-accent-2: #8b5cf6;
      --c-good: #10b981;
      --c-warn: #f59e0b;

      --r-12: 12px;
      --r-14: 14px;
      --e-sm: 0 1px 2px rgba(0,0,0,.06);
      --e-md: 0 8px 20px rgba(2,6,23,.08);

      --sz-gap: 16px;
      --sz-pad: 16px;
      --w-max: 980px;
    }
    @media (prefers-color-scheme: dark){
      :root{
        --c-bg: #0b0f19;
        --c-surface: #0f172a;
        --c-text: #e5e7eb;
        --c-muted: #9ca3af;
        --c-line: #1f2937;
        --e-sm: 0 1px 2px rgba(0,0,0,.4);
        --e-md: 0 12px 28px rgba(0,0,0,.35);
      }
    }

    /* ================================
       BASE
       ================================ */
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, -apple-system, Segoe UI, Inter, Roboto, "Helvetica Neue", Arial;
      color:var(--c-text);
      background:
        radial-gradient(1200px 800px at 20% -10%, rgba(99,102,241,.14), transparent 50%),
        radial-gradient(1000px 700px at 110% 10%, rgba(139,92,246,.12), transparent 55%),
        var(--c-bg);
      line-height:1.6;
    }
    .u-wrap{max-width:var(--w-max); margin:24px auto 80px; padding:0 20px}

    /* ================================
       TOPBAR
       ================================ */
    .topbar{
      position:sticky; top:0; z-index:10;
      backdrop-filter: saturate(140%) blur(10px);
      background: color-mix(in srgb, var(--c-bg) 70%, transparent);
      border-bottom:1px solid var(--c-line);
    }
    .topbar__in{max-width:var(--w-max); margin:0 auto; padding:12px 20px; display:flex; gap:12px; align-items:center; justify-content:space-between}
    .brand{display:flex; gap:12px; align-items:center}
    .brand__logo{width:36px; height:36px; border-radius:10px; background:linear-gradient(135deg,var(--c-accent-1),var(--c-accent-2)); box-shadow:var(--e-sm); position:relative; overflow:hidden}
    .brand__logo::after{content:""; position:absolute; inset:0; background: radial-gradient(500px 300px at -20% -40%, rgba(255,255,255,.35), transparent 55%)}
    .brand__title{margin:0; font-size:1.05rem; font-weight:800; letter-spacing:.2px}
    .brand__sub{margin:0; font-size:.9rem; color:var(--c-muted)}

    .toggle{display:inline-flex; border:1px solid var(--c-line); border-radius:999px; padding:4px; gap:4px; background:var(--c-surface); box-shadow:var(--e-sm)}
    .toggle__btn{appearance:none; border:0; background:transparent; color:var(--c-muted); padding:8px 14px; border-radius:999px; font-weight:700; cursor:pointer; transition:.16s transform}
    .toggle__btn[aria-pressed="true"]{color:var(--c-text); background: color-mix(in srgb, var(--c-accent-1) 10%, transparent)}
    .toggle__btn:active{transform:scale(.98)}

    /* ================================
       INTRO + META
       ================================ */
    .intro{margin-top:18px; background:var(--c-surface); border:1px solid var(--c-line); border-radius:var(--r-14); box-shadow:var(--e-md); overflow:hidden}
    .intro__top{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:20px; flex-wrap:wrap}
    .intro__title{margin:0; font-size:1.3rem; font-weight:800}
    .intro__sub{margin:0; font-size:.95rem; color:var(--c-muted)}
    .chips{display:flex; gap:10px; flex-wrap:wrap}
    .chip{background:color-mix(in srgb, var(--c-accent-1) 7%, transparent); border:1px solid var(--c-line); padding:8px 12px; border-radius:999px; font-weight:700; font-size:.9rem}

    .meta{display:grid; gap:10px; padding:14px; border-top:1px solid var(--c-line); grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); background:linear-gradient(0deg,color-mix(in srgb,var(--c-accent-2) 8%,transparent),transparent)}
    .meta__box{background:var(--c-surface); border:1px solid var(--c-line); border-radius:12px; padding:10px 12px; display:flex; align-items:center; justify-content:space-between}
    .meta__lbl{font-size:.85rem; color:var(--c-muted)}
    .meta__num{font-size:1.2rem; font-weight:800}

    /* ================================
       GRID + CARD
       ================================ */
    .grid{display:grid; gap:18px; margin-top:22px; grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}
    .card{background:var(--c-surface); border:1px solid var(--c-line); border-radius:var(--r-14); box-shadow:var(--e-sm); overflow:hidden; transition:transform .16s, box-shadow .16s, border-color .16s}
    .card:hover{transform:translateY(-2px); box-shadow:var(--e-md); border-color: color-mix(in srgb,var(--c-accent-1) 25%, var(--c-line))}
    .card__head{display:flex; gap:12px; align-items:center; justify-content:space-between; padding:14px; border-bottom:1px solid var(--c-line); background:linear-gradient(180deg,color-mix(in srgb,var(--c-accent-1) 8%,transparent),transparent)}
    .card__badge{width:34px; height:34px; border-radius:10px; display:grid; place-items:center; font-weight:900; color:#fff; background:linear-gradient(135deg,var(--c-accent-1),var(--c-accent-2))}
    .card__tt{flex:1}
    .card__title{margin:0; font-size:1.02rem; font-weight:800}
    .card__muscles{font-size:.85rem; color:var(--c-muted)}
    .card__sets{font-weight:900; font-size:.92rem; padding:8px 10px; border-radius:999px; background:color-mix(in srgb,var(--c-accent-1) 7%, transparent); border:1px solid var(--c-line)}
    .card__body{padding:12px 14px}
    .card__h{margin:0 0 6px; font-size:.92rem; color:var(--c-muted); letter-spacing:.2px}
    .list{margin:0; padding:0; list-style:none}
    .list__item{padding:6px 0 6px 26px; position:relative; font-size:.95rem}
    .list__item::before{content:""; position:absolute; left:0; top:12px; width:14px; height:14px; border-radius:50%; background:conic-gradient(var(--c-good), var(--c-accent-1) 70%, var(--c-accent-2))}
    .note{margin-top:8px; padding:10px 12px; border-radius:10px; border:1px dashed var(--c-line); background:linear-gradient(0deg,color-mix(in srgb,var(--c-warn) 12%, transparent),transparent); font-size:.9rem}

    /* ================================
       FOOT
       ================================ */
    .foot{margin-top:24px; padding:16px; border:1px solid var(--c-line); border-radius:var(--r-14); background:var(--c-surface); box-shadow:var(--e-sm); display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap}
    .foot__text{margin:0; color:var(--c-muted); font-size:.95rem}
    .btn{appearance:none; border:1px solid var(--c-line); background:var(--c-surface); padding:10px 14px; border-radius:10px; font-weight:800; cursor:pointer; transition:.16s; box-shadow:var(--e-sm)}
    .btn--brand{background:linear-gradient(135deg,var(--c-accent-1),var(--c-accent-2)); color:#fff; border-color:transparent}
    .btn:active{transform:scale(.98)}
    @media (prefers-reduced-motion: reduce){
      .toggle__btn,.card,.btn{transition:none !important}
    }
  </style>
</head>
<body>
  <!-- TOPBAR -->
  <header class="topbar" role="navigation" aria-label="Top bar">
    <div class="topbar__in">
      <div class="brand">
        <div class="brand__logo" aria-hidden="true"></div>
        <div>
          <h1 class="brand__title">Dumbbell Full-Body</h1>
          <p class="brand__sub" data-js="subtitle">One 20 lb dumbbell • 3×/week</p>
        </div>
      </div>

      <div class="toggle" role="group" aria-label="Equipment toggle">
        <button class="toggle__btn" data-js="mode-btn" data-mode="one" aria-pressed="true">1 Dumbbell</button>
        <button class="toggle__btn" data-js="mode-btn" data-mode="two" aria-pressed="false">2 Dumbbells</button>
      </div>
    </div>
  </header>

  <!-- MAIN -->
  <main class="u-wrap">
    <!-- Intro -->
    <section class="intro" aria-labelledby="intro-title">
      <div class="intro__top">
        <div>
          <h2 id="intro-title" class="intro__title">Full-Body Routine</h2>
          <p class="intro__sub">Build muscle, improve posture, and burn fat with minimal equipment.</p>
        </div>
        <div class="chips">
          <span class="chip">30–40 min</span>
          <span class="chip" data-js="equip-chip">20 lb dumbbell</span>
          <span class="chip">Progressive overload</span>
        </div>
      </div>
      <div class="meta" aria-label="Workout overview">
        <div class="meta__box"><span class="meta__lbl">Duration</span><span class="meta__num">30–40</span></div>
        <div class="meta__box"><span class="meta__lbl">Exercises</span><span class="meta__num" data-js="count">8</span></div>
        <div class="meta__box"><span class="meta__lbl">Frequency</span><span class="meta__num">3×/wk</span></div>
        <div class="meta__box"><span class="meta__lbl">Equipment</span><span class="meta__num" data-js="equip-num">1 DB</span></div>
      </div>
    </section>

    <!-- Plan grid -->
    <section class="grid" aria-live="polite" aria-busy="false" data-js="grid"></section>

    <!-- Footer -->
    <section class="foot" aria-label="Tips & actions">
      <p class="foot__text">Train 3× weekly with ≥1 rest day between. Track reps. Add reps or tempo to progress. Works well with IF.</p>
      <div>
        <button class="btn" type="button" onclick="window.print()">Print</button>
        <button class="btn btn--brand" type="button" onclick="window.scrollTo({top:0,behavior:'smooth'})">Back to top</button>
      </div>
    </section>
  </main>

  <script>
    "use strict";

    /** ================================
     *  CONSTANTS / BUDGETS (visible)
     *  ================================ */
    /** @type {const} */ const MAX_EX = 16;
    /** @type {const} */ const MAX_CUES = 10;
    /** @type {const} */ const STORAGE_KEY = "db_mode";
    /** @type {const} */ const RID = Date.now().toString(36); // deterministic per load

    /** ================================
     *  LOGGER (flag-guarded, structured)
     *  ================================ */
    const Logger = (() => {
      let enabled = false; // flag #1 (instrumentation)
      /** @returns {void} */
      function on(){ enabled = true; }
      /** @returns {void} */
      function off(){ enabled = false; }
      /** @param {string} level @param {string} action @param {object} ctx */
      function log(level, action, ctx){
        if(!enabled) return;
        const rec = {ts:new Date().toISOString(), level, rid:RID, subsystem:"ui", action, ...ctx};
        // keys sorted for deterministic output
        const sorted = {};
        Object.keys(rec).sort().forEach(k => { sorted[k] = rec[k]; });
        console.log(JSON.stringify(sorted));
      }
      return {on,off,log};
    })();

    /** ================================
     *  ASSERTIONS (side-effect-free)
     *  ================================ */
    /** @param {boolean} cond @param {string} code @param {string} msg */
    function assertTrue(cond, code, msg){
      if(!cond){ Logger.log("error","assert_fail",{code,msg}); }
      return !!cond;
    }
    /** @param {any} v */ function isStr(v){ return typeof v === "string"; }
    /** @param {any} v */ function isArr(v){ return Array.isArray(v); }
    /** @param {string} m */ function isMode(m){ return m === "one" || m === "two"; }

    /** ================================
     *  DATA (immutable, fixed table)
     *  ================================ */
    /** @typedef {{t:string,m:string,s:string,cues:string[],note?:string}} Move */
    /** @type {{one:Move[], two:Move[]}} */
    const PLANS = Object.freeze({
      one: Object.freeze([
        {t:"Goblet Squat", m:"Legs • Glutes • Core", s:"3 × 10–15",
          cues:["Hold DB vertically at chest.","Lower ~3s; brace core.","Drive up through mid-foot."],
          note:"Optional: 1–2s pause at bottom."},
        {t:"Romanian Deadlift", m:"Hamstrings • Glutes • Lower Back", s:"3 × 12",
          cues:["Hold DB with both hands.","Hinge; soft knees; neutral back.","Stop at hamstring stretch."]},
        {t:"One-Arm Floor Press", m:"Chest • Triceps • Shoulders", s:"3 × 10/side",
          cues:["Press straight; wrist over elbow.","Lower with elbow ~45°.","Light pause on floor."]},
        {t:"One-Arm Overhead Press", m:"Shoulders • Triceps • Core", s:"3 × 8–10/side",
          cues:["Press vertical; biceps by ear.","Squeeze glutes/abs.","Control the eccentric."]},
        {t:"One-Arm Row", m:"Back • Lats • Biceps", s:"3 × 10–12/side",
          cues:["Brace on knee/chair.","Row to lower ribs; lead elbow.","Reach long at bottom."]},
        {t:"Hammer Curl", m:"Biceps • Forearms", s:"3 × 10–12/side",
          cues:["Neutral grip; elbows close.","Squeeze 1s at top.","Lower 2–3s."]},
        {t:"Russian Twist", m:"Obliques • Core", s:"3 × 20 twists",
          cues:["Lean back slightly.","Rotate torso; not just arms.","No swinging."]},
        {t:"Suitcase Carry", m:"Core • Grip • Posture", s:"3 × 30–40s/side",
          cues:["DB at side; walk tall.","Ribs stacked over pelvis.","Keep shoulders level."]}
      ]),
      two: Object.freeze([
        {t:"DB Front Squat (2)", m:"Legs • Glutes • Core", s:"4 × 8–12",
          cues:["Rack DBs on shoulders.","Torso tall; knees track.","Drive up; elbows slightly forward."],
          note:"Front-rack = more quad/core; suitcase = more hip."},
        {t:"DB Romanian Deadlift (2)", m:"Hamstrings • Glutes • Lower Back", s:"4 × 8–10",
          cues:["DBs in front; lats on.","Hips back; shins near vertical.","Stand tall; squeeze glutes."]},
        {t:"DB Floor Press (2)", m:"Chest • Triceps • Shoulders", s:"3 × 8–12",
          cues:["Forearms vertical.","Pause on triceps.","Press together; no clank."]},
        {t:"DB Overhead Press (2)", m:"Shoulders • Triceps • Core", s:"3 × 6–10",
          cues:["Stand tall; brace.","Press up and back slightly.","Lower under control."]},
        {t:"Bent-Over DB Row (2)", m:"Back • Lats • Biceps", s:"3 × 10–12",
          cues:["Hinge 30–45°; neutral.","Row to lower ribs; pause 1s.","Lower fully; slight protraction."]},
        {t:"Alt. Hammer Curl (2)", m:"Biceps • Forearms", s:"3 × 20 total",
          cues:["Alternate; minimal sway.","Hard squeeze at top.","Last 3 reps: 3s down."]},
        {t:"Dead Bug (1 DB)", m:"Core • Anti-Extension", s:"3 × 8–10/side",
          cues:["1 DB over chest; ribs down.","Opposite arm/leg extend; exhale.","Return; switch sides."],
          note:"Single-DB here improves core control."},
        {t:"Farmer’s Carry (2)", m:"Core • Grip • Posture", s:"4 × 30–40s",
          cues:["DBs at sides; long spine.","Short, controlled steps.","Set down safely."]}
      ])
    });

    /** ================================
     *  DOM GETTERS (no hidden globals)
     *  ================================ */
    function getGrid(){ const el = document.querySelector('[data-js="grid"]'); return assertTrue(!!el,"dom.grid","grid missing") ? /** @type {HTMLElement} */(el) : document.body; }
    function getBtns(){ const list = Array.from(document.querySelectorAll('[data-js="mode-btn"]')); return assertTrue(list.length===2,"dom.btns","toggle buttons missing") ? list : []; }
    function getSub(){ const el = document.querySelector('[data-js="subtitle"]'); return assertTrue(!!el,"dom.sub","subtitle missing") ? /** @type {HTMLElement} */(el) : document.body; }
    function getEquipChip(){ const el = document.querySelector('[data-js="equip-chip"]'); return assertTrue(!!el,"dom.chip","chip missing") ? /** @type {HTMLElement} */(el) : document.body; }
    function getEquipNum(){ const el = document.querySelector('[data-js="equip-num"]'); return assertTrue(!!el,"dom.enum","equip num missing") ? /** @type {HTMLElement} */(el) : document.body; }
    function getCount(){ const el = document.querySelector('[data-js="count"]'); return assertTrue(!!el,"dom.count","count missing") ? /** @type {HTMLElement} */(el) : document.body; }

    /** ================================
     *  PLAN VALIDATION
     *  ================================ */
    /** @param {Move[]} arr */
    function okMoves(arr){
      if(!assertTrue(isArr(arr),"plan.type","plan not array")) return false;
      if(!assertTrue(arr.length>0 && arr.length<=MAX_EX,"plan.len","bad plan length")) return false;
      for(let i=0;i<Math.min(arr.length,MAX_EX);i++){
        const m = arr[i];
        if(!assertTrue(isStr(m.t)&&isStr(m.m)&&isStr(m.s),"move.shape","bad fields")) return false;
        if(!assertTrue(isArr(m.cues),"move.cues","cues not array")) return false;
        if(!assertTrue(m.cues.length>0 && m.cues.length<=MAX_CUES,"cues.len","bad cues length")) return false;
      }
      return true;
    }

    /** ================================
     *  RENDERING (bounded loops)
     *  ================================ */
    /** @param {Move} mv @param {number} idx */
    function cardHTML(mv, idx){
      // two simple checks (avg ≥2/function)
      if(!assertTrue(isStr(mv.t),"render.title","title not string")) return "";
      if(!assertTrue(idx>=0,"render.idx","idx negative")) return "";

      const limit = Math.min(mv.cues.length, MAX_CUES);
      let cuesHTML = "";
      for(let i=0;i<limit;i++){
        const c = mv.cues[i];
        cuesHTML += `<li class="list__item">${c}</li>`;
      }
      const note = mv.note ? `<div class="note">${mv.note}</div>` : "";
      return `
        <article class="card" aria-label="${mv.t}">
          <div class="card__head">
            <div class="card__badge" aria-hidden="true">${idx+1}</div>
            <div class="card__tt">
              <h3 class="card__title">${mv.t}</h3>
              <div class="card__muscles">${mv.m}</div>
            </div>
            <div class="card__sets">${mv.s}</div>
          </div>
          <div class="card__body">
            <h4 class="card__h">Form cues</h4>
            <ul class="list">${cuesHTML}</ul>
            ${note}
          </div>
        </article>
      `;
    }

    /** @param {"one"|"two"} mode */
    function renderPlan(mode){
      const grid = getGrid();
      if(!assertTrue(!!grid,"render.grid","grid null")) return;

      const list = PLANS[mode];
      if(!okMoves(list)){ grid.innerHTML = `<article class="card"><div class="card__body"><strong>Plan error.</strong> Try reloading.</div></article>`; return; }

      grid.setAttribute("aria-busy","true");
      const cap = Math.min(list.length, MAX_EX);
      /** @type {string[]} */ const out = new Array(cap);
      for(let i=0;i<cap;i++){ out[i] = cardHTML(list[i], i); }
      grid.innerHTML = out.join("");
      getCount().textContent = String(cap);
      grid.setAttribute("aria-busy","false");
      Logger.log("info","render_ok",{mode,count:cap});
    }

    /** ================================
     *  STATE
     *  ================================ */
    /** @returns {"one"|"two"} */
    function loadMode(){
      let m = "one";
      try{ const v = localStorage.getItem(STORAGE_KEY); if(v && isMode(v)) m = /** @type {"one"|"two"} */(v); }catch(_){}
      assertTrue(isMode(m),"state.mode","invalid mode from storage");
      return m;
    }
    /** @param {"one"|"two"} m */
    function saveMode(m){ if(assertTrue(isMode(m),"state.save","invalid mode on save")){ try{ localStorage.setItem(STORAGE_KEY,m); }catch(_){} } }

    /** @param {"one"|"two"} m */
    function setMode(m){
      if(!assertTrue(isMode(m),"state.set","bad mode")) return;
      const btns = getBtns();
      for(let i=0;i<btns.length;i++){ btns[i].setAttribute("aria-pressed", btns[i].dataset.mode===m ? "true" : "false"); }
      getSub().textContent = (m==="one") ? "One 20 lb dumbbell • 3×/week" : "Two 20 lb dumbbells • 3×/week";
      getEquipChip().textContent = (m==="one") ? "20 lb dumbbell" : "Pair of 20 lb DBs";
      getEquipNum().textContent = (m==="one") ? "1 DB" : "2 DBs";
      renderPlan(m);
      saveMode(m);
    }

    /** ================================
     *  WIRING (bounded, deterministic)
     *  ================================ */
    function bindToggle(){
      const btns = getBtns();
      if(!assertTrue(btns.length===2,"bind.len","need 2 buttons")) return;
      for(let i=0;i<btns.length;i++){
        const b = btns[i];
        b.addEventListener("click", () => { const m = b.dataset.mode || "one"; setMode(isMode(m)? /** @type {"one"|"two"} */(m) : "one"); });
        b.addEventListener("keydown",(e)=>{
          if(e.key==="ArrowRight"||e.key==="ArrowLeft"){
            e.preventDefault();
            const next = e.key==="ArrowRight" ? (i+1)%btns.length : (i-1+btns.length)%btns.length;
            btns[next].focus(); btns[next].click();
          }
        });
      }
    }

    /** ================================
     *  BOOT (single thread, no recursion)
     *  ================================ */
    (function boot(){
      // Logger.off(); // default off; flip to on() for diagnostics
      assertTrue(typeof MAX_EX==="number","boot.const","MAX_EX missing");
      assertTrue(typeof MAX_CUES==="number","boot.const2","MAX_CUES missing");
      bindToggle();
      setMode(loadMode());
    })();
  </script>
</body>
</html>
